<div class="notification-popup">
  <div class="notification-content">
    <h2 class="notification-title">プッシュ通知の許可</h2>
    <p class="notification-description">
      タスクの担当者に割り振られた際等に、プッシュ通知を受け取ることができます。
      通知を受け取るには、許可が必要です。
      ブラウザの設定で「許可」または「ブロック」を選択してください。
    </p>
    <div *ngIf="errorMessage" class="text-danger" style="margin-bottom: 1rem;">
      {{ errorMessage }}
      <button class="btn btn-secondary btn-sm" (click)="closeDialog()">閉じる</button>
    </div>
    <div class="notification-buttons" *ngIf="!errorMessage">
      <button class="notification-button allow-button" (click)="requestPermission()" [disabled]="isLoading">
        <span *ngIf="!isLoading">許可する</span>
        <span *ngIf="isLoading">処理中...</span>
      </button>
      <button class="notification-button decline-button" (click)="revokePermission()" [disabled]="isLoading">
        <span *ngIf="!isLoading">許可しない</span>
        <span *ngIf="isLoading">処理中...</span>
      </button>
    </div>
  </div>
</div>
<div *ngIf="hasRequested && permissionGranted" class="text-success">
  通知が許可されました。
</div>
<div *ngIf="hasRequested && !permissionGranted && !errorMessage" class="text-danger">
  通知が許可されませんでした。設定は、ベルマークからいつでも変更できます。
</div>
